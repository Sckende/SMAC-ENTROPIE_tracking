---
title: "PTEBAR-JUV - Data explo"
author: "CCJ"
output:
  html_document:
    toc: true
    number_sections: true
    toc_float: true
---

```{r, include = F}
# Output figure in HTML5
if (knitr::is_html_output()) knitr::knit_hooks$set(
  plot = function(x, options) {
    cap  <- options$fig.cap  # figure caption
    tags <- htmltools::tags
    as.character(tags$figure(
      tags$img(src = x, alt = cap),
      tags$figcaption(cap)
    ))
  }
)

# packages
require(knitr)
require(mapview)
require(leafpop)
require(tidyverse)
require(sf)
```

# Point méthodo  
 
```{r, echo = F}
tabb <- readRDS("C:/Users/ccjuhasz/Desktop/SMAC/Projet_publi/X-PTEBAR_argos_JUV/DATA/PTEBAR_JUV_Infos_bilan.rds")

tabb1 <- as.data.frame(tabb[, c('Vessel', 'start', 'deploy', 'n_loc', 'attach', 'burrow', 'ring', 'weight', 'wing', 'remark')])[, -11]

kable(tabb1)
```

# Résumé des données argos
```{r, echo = F}
tabb2 <- as.data.frame(tabb[, c('Vessel', 'max_date', 'min_lat', 'max_lat', 'min_lon', 'max_lon', 'max_speed', 'max_dist_km', 'date_loc', 'timing_for_max', 'dist_travel_km', 'duration_trip_day')])[, -13]

# Round numerical values


kable(tabb2)
```
# Visualisation des trajets

```{r, echo=F}

# map_lines <- readRDS("C:/Users/ccjuhasz/Desktop/SMAC/Projet_publi/X-PTEBAR_argos_JUV/DATA/PTEBAR_JUV_raw_map_lines.rds")
# 
# map_lines

track_lines_bilan_juv <- readRDS("C:/Users/ccjuhasz/Desktop/SMAC/Projet_publi/X-PTEBAR_argos_JUV/DATA/PTEBAR_JUV_Infos_bilan.rds")

  mapview(track_lines_bilan_juv,
          zcol = 'Vessel',
          burst = T,
          homebutton = F,
          popup = popupTable(track_lines_bilan_juv,
                             feature.id = FALSE,
                             row.numbers = FALSE,
                             zcol = c('Vessel', 'max_dist', 'duration_trip_day')))

in_run <- readRDS("C:/Users/ccjuhasz/Desktop/SMAC/Projet_publi/X-PTEBAR_argos_JUV/DATA/PTEBAR_JUV_in_Run_points_data.rds")
  
  mapview(in_run,
          zcol = 'Vessel',
          burst = T,
          homebutton = F)

```